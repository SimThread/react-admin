{"version":3,"sources":["components/ui/Wysiwyg.jsx"],"names":["rawContentState","entityMap","0","type","mutability","data","src","height","width","blocks","key","text","depth","inlineStyleRanges","entityRanges","offset","length","Wysiwyg","state","editorContent","undefined","contentState","editorState","onEditorChange","_this","setState","clearContent","onContentStateChange","onEditorStateChange","imageUploadCallBack","file","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","FormData","append","send","addEventListener","response","JSON","parse","responseText","error","_this$state","this","react__WEBPACK_IMPORTED_MODULE_11___default","a","createElement","className","_BreadcrumbCustom__WEBPACK_IMPORTED_MODULE_12__","first","second","antd_es_row__WEBPACK_IMPORTED_MODULE_1__","gutter","antd_es_col__WEBPACK_IMPORTED_MODULE_3__","md","antd_es_card__WEBPACK_IMPORTED_MODULE_5__","title","bordered","react_draft_wysiwyg__WEBPACK_IMPORTED_MODULE_13__","toolbarClassName","wrapperClassName","editorClassName","toolbar","history","inDropdown","inline","list","textAlign","image","uploadCallback","placeholder","spellCheck","onFocus","console","log","onBlur","onTab","localization","locale","translations","generic.add","mention","separator","trigger","caseSensitive","suggestions","value","url","draftToHtml","style","whiteSpace","draftToMarkdown","stringify","Component"],"mappings":"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","file":"static/js/1.0730c7f0.chunk.js","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/26.\n */\nimport React, { Component } from 'react';\nimport { Row, Col, Card } from 'antd';\nimport BreadcrumbCustom from '../BreadcrumbCustom';\nimport { Editor } from 'react-draft-wysiwyg';\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\nimport draftToHtml from 'draftjs-to-html';\nimport draftToMarkdown from 'draftjs-to-markdown';\n\nconst rawContentState = {\"entityMap\":{\"0\":{\"type\":\"IMAGE\",\"mutability\":\"MUTABLE\",\"data\":{\"src\":\"http://i.imgur.com/aMtBIep.png\",\"height\":\"auto\",\"width\":\"100%\"}}},\"blocks\":[{\"key\":\"9unl6\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}},{\"key\":\"95kn\",\"text\":\" \",\"type\":\"atomic\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[{\"offset\":0,\"length\":1,\"key\":0}],\"data\":{}},{\"key\":\"7rjes\",\"text\":\"\",\"type\":\"unstyled\",\"depth\":0,\"inlineStyleRanges\":[],\"entityRanges\":[],\"data\":{}}]};\n\nclass Wysiwyg extends Component {\n    state = {\n        editorContent: undefined,\n        contentState: rawContentState,\n        editorState: '',\n    };\n\n    onEditorChange = (editorContent) => {\n        this.setState({\n            editorContent,\n        });\n    };\n\n    clearContent = () => {\n        this.setState({\n            contentState: '',\n        });\n    };\n\n    onContentStateChange = (contentState) => {\n    };\n\n    onEditorStateChange = (editorState) => {\n        this.setState({\n            editorState,\n        });\n    };\n\n    imageUploadCallBack = file => new Promise(\n        (resolve, reject) => {\n            const xhr = new XMLHttpRequest(); // eslint-disable-line no-undef\n            xhr.open('POST', 'https://api.imgur.com/3/image');\n            xhr.setRequestHeader('Authorization', 'Client-ID 8d26ccd12712fca');\n            const data = new FormData(); // eslint-disable-line no-undef\n            data.append('image', file);\n            xhr.send(data);\n            xhr.addEventListener('load', () => {\n                const response = JSON.parse(xhr.responseText);\n                resolve(response);\n            });\n            xhr.addEventListener('error', () => {\n                const error = JSON.parse(xhr.responseText);\n                reject(error);\n            });\n        }\n    );\n\n    render() {\n        const { editorContent, editorState } = this.state;\n        return (\n            <div className=\"gutter-example button-demo\">\n                <BreadcrumbCustom first=\"UI\" second=\"富文本\" />\n                <Row gutter={16}>\n                    <Col className=\"gutter-row\" md={24}>\n                        <div className=\"gutter-box\">\n                            <Card title=\"富文本编辑器\" bordered={false} >\n                                <Editor\n                                    editorState={editorState}\n                                    toolbarClassName=\"home-toolbar\"\n                                    wrapperClassName=\"home-wrapper\"\n                                    editorClassName=\"home-editor\"\n                                    onEditorStateChange={this.onEditorStateChange}\n                                    toolbar={{\n                                        history: { inDropdown: true },\n                                        inline: { inDropdown: false },\n                                        list: { inDropdown: true },\n                                        textAlign: { inDropdown: true },\n                                        image: { uploadCallback: this.imageUploadCallBack },\n                                    }}\n                                    onContentStateChange={this.onEditorChange}\n                                    placeholder=\"请输入正文~~尝试@哦，有惊喜\"\n                                    spellCheck\n                                    onFocus={() => {console.log('focus')}}\n                                    onBlur={() => {console.log('blur')}}\n                                    onTab={() => {console.log('tab'); return true;}}\n                                    localization={{ locale: 'zh', translations: {'generic.add': 'Test-Add'} }}\n                                    mention={{\n                                        separator: ' ',\n                                        trigger: '@',\n                                        caseSensitive: true,\n                                        suggestions: [\n                                            { text: 'A', value: 'AB', url: 'href-a' },\n                                            { text: 'AB', value: 'ABC', url: 'href-ab' },\n                                            { text: 'ABC', value: 'ABCD', url: 'href-abc' },\n                                            { text: 'ABCD', value: 'ABCDDDD', url: 'href-abcd' },\n                                            { text: 'ABCDE', value: 'ABCDE', url: 'href-abcde' },\n                                            { text: 'ABCDEF', value: 'ABCDEF', url: 'href-abcdef' },\n                                            { text: 'ABCDEFG', value: 'ABCDEFG', url: 'href-abcdefg' },\n                                        ],\n                                    }}\n                                />\n\n                                <style>{`\n                                    .home-editor {\n                                        min-height: 300px;\n                                    }\n                                `}</style>\n                            </Card>\n                        </div>\n                    </Col>\n                    <Col className=\"gutter-row\" md={8}>\n                        <Card title=\"同步转换HTML\" bordered={false}>\n                            <pre>{draftToHtml(editorContent)}</pre>\n                        </Card>\n                    </Col>\n                    <Col className=\"gutter-row\" md={8}>\n                        <Card title=\"同步转换MarkDown\" bordered={false}>\n                            <pre style={{whiteSpace: 'pre-wrap'}}>{draftToMarkdown(editorContent)}</pre>\n                        </Card>\n                    </Col>\n                    <Col className=\"gutter-row\" md={8}>\n                        <Card title=\"同步转换JSON\" bordered={false}>\n                            <pre style={{whiteSpace: 'normal'}}>{JSON.stringify(editorContent)}</pre>\n                        </Card>\n                    </Col>\n                </Row>\n            </div>\n        );\n    }\n}\n\nexport default Wysiwyg;"],"sourceRoot":""}